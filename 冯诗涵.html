<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†¯è¯—æ¶µæ¨ç®±å­</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 600px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #FFD700;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .info-item {
            text-align: center;
            flex: 1;
        }
        
        .info-item span {
            font-size: 1.2rem;
            font-weight: bold;
            color: #FFD700;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
        }
        
        #game-board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-gap: 2px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .cell {
            aspect-ratio: 1/1;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .wall {
            background: #3a3a72;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .floor {
            background: #7b7bb8;
        }
        
        .box {
            background: #e67e22;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        .target {
            background: #7b7bb8;
            position: relative;
        }
        
        .target::after {
            content: "â˜…";
            color: #ff6b6b;
            position: absolute;
            font-size: 1.2rem;
        }
        
        .box-on-target {
            background: #2ecc71;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        .player {
            background: #3498db;
            border-radius: 50%;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .player::after {
            content: "ğŸ˜Š";
            position: absolute;
            font-size: 1.2rem;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            width: 100%;
            max-width: 600px;
        }
        
        .direction-buttons {
            display: grid;
            grid-template-areas: 
                ". up ."
                "left down right";
            gap: 10px;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background: #3498db;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        #up { grid-area: up; }
        #down { grid-area: down; }
        #left { grid-area: left; }
        #right { grid-area: right; }
        
        .win-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: #FFD700;
            padding: 30px 50px;
            border-radius: 15px;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 10;
            display: none;
            animation: popIn 0.5s ease-out;
        }
        
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            70% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            width: 100%;
            max-width: 600px;
        }
        
        .instructions h3 {
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .instructions p {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            
            .cell {
                font-size: 1.2rem;
            }
            
            button {
                padding: 10px 15px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>å†¯è¯—æ¶µæ¨ç®±å­</h1>
        <p>å°†æ‰€æœ‰ç®±å­æ¨åˆ°ç›®æ ‡ä½ç½®å³å¯è¿‡å…³</p>
    </div>
    
    <div class="game-info">
        <div class="info-item">
            å…³å¡: <span id="level">1</span>
        </div>
        <div class="info-item">
            ç§»åŠ¨æ­¥æ•°: <span id="moves">0</span>
        </div>
        <div class="info-item">
            éš¾åº¦: <span id="difficulty">ç®€å•</span>
        </div>
    </div>
    
    <div class="game-container">
        <div id="game-board"></div>
        <div id="win-message" class="win-message">
            å†¯è¯—æ¶µä½ å¤ªæ£’äº†ï¼<br>
            <button id="next-level">ä¸‹ä¸€å…³</button>
        </div>
    </div>
    
    <div class="controls">
        <div class="direction-buttons">
            <button id="up">â†‘</button>
            <button id="left">â†</button>
            <button id="down">â†“</button>
            <button id="right">â†’</button>
        </div>
        <button id="reset">é‡æ–°å¼€å§‹</button>
    </div>
    
    <div class="instructions">
        <h3>æ¸¸æˆè¯´æ˜</h3>
        <p>ä½¿ç”¨æ–¹å‘é”®æˆ–å±å¹•ä¸Šçš„æ–¹å‘æŒ‰é’®æ§åˆ¶è§’è‰²ç§»åŠ¨</p>
        <p>å°†æ‰€æœ‰ç®±å­(æ©™è‰²æ–¹å—)æ¨åˆ°ç›®æ ‡ä½ç½®(æ˜Ÿæ˜Ÿ)å³å¯è¿‡å…³</p>
        <p>æ¯é€šè¿‡ä¸€å…³ï¼Œéš¾åº¦ä¼šå¢åŠ ï¼Œåœ°å›¾ä¼šå˜å¾—æ›´å¤æ‚</p>
    </div>

    <script>
        // æ¸¸æˆå…ƒç´ å®šä¹‰
        const WALL = 1;
        const FLOOR = 0;
        const BOX = 2;
        const TARGET = 3;
        const PLAYER = 4;
        const BOX_ON_TARGET = 5;
        
        // åˆå§‹æ¸¸æˆçŠ¶æ€
        let currentLevel = 1;
        let moves = 0;
        let gameBoard = [];
        let playerPosition = {x: 0, y: 0};
        
        // å…³å¡è®¾è®¡ - éšç€å…³å¡å¢åŠ ï¼Œåœ°å›¾ä¼šå˜å¾—æ›´å¤§æ›´å¤æ‚
        const levels = [
            // å…³å¡1 - ç®€å•
            [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 2, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 1, 0, 0, 3, 0, 1],
                [1, 0, 0, 0, 4, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ],
            // å…³å¡2 - ä¸­ç­‰
            [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 2, 0, 0, 1, 0, 0, 1],
                [1, 0, 0, 1, 0, 2, 0, 0, 0, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 3, 0, 4, 0, 0, 3, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 1, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ],
            // å…³å¡3 - å›°éš¾
            [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 1, 0, 0, 0, 1],
                [1, 0, 2, 0, 0, 1, 0, 0, 0, 1],
                [1, 0, 0, 1, 0, 0, 0, 1, 0, 1],
                [1, 0, 0, 0, 2, 0, 0, 0, 0, 1],
                [1, 0, 3, 0, 1, 0, 3, 0, 0, 1],
                [1, 0, 0, 0, 0, 4, 0, 0, 0, 1],
                [1, 0, 0, 1, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ],
            // å…³å¡4 - æ›´å¤æ‚
            [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 1, 0, 1, 1, 0, 0, 1],
                [1, 0, 2, 0, 0, 2, 0, 0, 0, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 3, 0, 4, 0, 3, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 0, 1, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ],
            // å…³å¡5 - æŒ‘æˆ˜
            [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 2, 0, 1, 1, 0, 0, 1],
                [1, 0, 0, 1, 2, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 3, 0, 4, 0, 3, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 0, 1, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ]
        ];
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // é‡ç½®ç§»åŠ¨æ­¥æ•°
            moves = 0;
            document.getElementById('moves').textContent = moves;
            
            // è®¾ç½®å½“å‰å…³å¡
            document.getElementById('level').textContent = currentLevel;
            
            // è®¾ç½®éš¾åº¦æ˜¾ç¤º
            let difficultyText = "ç®€å•";
            if (currentLevel === 2) difficultyText = "ä¸­ç­‰";
            else if (currentLevel === 3) difficultyText = "å›°éš¾";
            else if (currentLevel === 4) difficultyText = "ä¸“å®¶";
            else if (currentLevel >= 5) difficultyText = "å¤§å¸ˆ";
            
            document.getElementById('difficulty').textContent = difficultyText;
            
            // å¤åˆ¶å½“å‰å…³å¡åœ°å›¾
            gameBoard = JSON.parse(JSON.stringify(levels[currentLevel - 1]));
            
            // æŸ¥æ‰¾ç©å®¶ä½ç½®
            for (let y = 0; y < gameBoard.length; y++) {
                for (let x = 0; x < gameBoard[y].length; x++) {
                    if (gameBoard[y][x] === PLAYER) {
                        playerPosition = {x, y};
                    }
                }
            }
            
            // æ¸²æŸ“æ¸¸æˆæ¿
            renderGameBoard();
        }
        
        // æ¸²æŸ“æ¸¸æˆæ¿
        function renderGameBoard() {
            const gameBoardElement = document.getElementById('game-board');
            gameBoardElement.innerHTML = '';
            
            for (let y = 0; y < gameBoard.length; y++) {
                for (let x = 0; x < gameBoard[y].length; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    
                    switch (gameBoard[y][x]) {
                        case WALL:
                            cell.classList.add('wall');
                            break;
                        case FLOOR:
                            cell.classList.add('floor');
                            break;
                        case BOX:
                            cell.classList.add('floor', 'box');
                            break;
                        case TARGET:
                            cell.classList.add('target');
                            break;
                        case PLAYER:
                            cell.classList.add('floor', 'player');
                            break;
                        case BOX_ON_TARGET:
                            cell.classList.add('box-on-target');
                            break;
                    }
                    
                    gameBoardElement.appendChild(cell);
                }
            }
        }
        
        // ç§»åŠ¨ç©å®¶
        function movePlayer(dx, dy) {
            const newX = playerPosition.x + dx;
            const newY = playerPosition.y + dy;
            
            // æ£€æŸ¥æ˜¯å¦è¶…å‡ºè¾¹ç•Œ
            if (newX < 0 || newX >= gameBoard[0].length || newY < 0 || newY >= gameBoard.length) {
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯å¢™å£
            if (gameBoard[newY][newX] === WALL) {
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ç®±å­
            if (gameBoard[newY][newX] === BOX || gameBoard[newY][newX] === BOX_ON_TARGET) {
                const boxNewX = newX + dx;
                const boxNewY = newY + dy;
                
                // æ£€æŸ¥ç®±å­æ˜¯å¦å¯ä»¥ç§»åŠ¨
                if (boxNewX < 0 || boxNewX >= gameBoard[0].length || boxNewY < 0 || boxNewY >= gameBoard.length) {
                    return;
                }
                
                if (gameBoard[boxNewY][boxNewX] === WALL || 
                    gameBoard[boxNewY][boxNewX] === BOX || 
                    gameBoard[boxNewY][boxNewX] === BOX_ON_TARGET) {
                    return;
                }
                
                // ç§»åŠ¨ç®±å­
                if (gameBoard[boxNewY][boxNewX] === TARGET) {
                    gameBoard[boxNewY][boxNewX] = BOX_ON_TARGET;
                } else {
                    gameBoard[boxNewY][boxNewX] = BOX;
                }
                
                // æ›´æ–°åŸç®±å­ä½ç½®
                if (gameBoard[newY][newX] === BOX_ON_TARGET) {
                    gameBoard[newY][newX] = TARGET;
                } else {
                    gameBoard[newY][newX] = FLOOR;
                }
            }
            
            // æ›´æ–°ç©å®¶ä½ç½®
            if (gameBoard[playerPosition.y][playerPosition.x] === PLAYER) {
                gameBoard[playerPosition.y][playerPosition.x] = FLOOR;
            } else {
                gameBoard[playerPosition.y][playerPosition.x] = TARGET;
            }
            
            if (gameBoard[newY][newX] === TARGET) {
                gameBoard[newY][newX] = PLAYER;
            } else {
                gameBoard[newY][newX] = PLAYER;
            }
            
            playerPosition.x = newX;
            playerPosition.y = newY;
            
            // å¢åŠ ç§»åŠ¨æ­¥æ•°
            moves++;
            document.getElementById('moves').textContent = moves;
            
            // é‡æ–°æ¸²æŸ“æ¸¸æˆæ¿
            renderGameBoard();
            
            // æ£€æŸ¥æ˜¯å¦è·èƒœ
            checkWin();
        }
        
        // æ£€æŸ¥æ˜¯å¦è·èƒœ
        function checkWin() {
            let allBoxesOnTarget = true;
            
            for (let y = 0; y < gameBoard.length; y++) {
                for (let x = 0; x < gameBoard[y].length; x++) {
                    if (gameBoard[y][x] === BOX) {
                        allBoxesOnTarget = false;
                        break;
                    }
                }
                if (!allBoxesOnTarget) break;
            }
            
            if (allBoxesOnTarget) {
                setTimeout(() => {
                    document.getElementById('win-message').style.display = 'block';
                }, 300);
            }
        }
        
        // ä¸‹ä¸€å…³
        function nextLevel() {
            currentLevel++;
            if (currentLevel > levels.length) {
                currentLevel = 1; // å¾ªç¯å›åˆ°ç¬¬ä¸€å…³
            }
            document.getElementById('win-message').style.display = 'none';
            initGame();
        }
        
        // é‡ç½®å½“å‰å…³å¡
        function resetLevel() {
            document.getElementById('win-message').style.display = 'none';
            initGame();
        }
        
        // é”®ç›˜æ§åˆ¶
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                    movePlayer(0, -1);
                    break;
                case 'ArrowDown':
                    movePlayer(0, 1);
                    break;
                case 'ArrowLeft':
                    movePlayer(-1, 0);
                    break;
                case 'ArrowRight':
                    movePlayer(1, 0);
                    break;
            }
        });
        
        // æŒ‰é’®æ§åˆ¶
        document.getElementById('up').addEventListener('click', () => movePlayer(0, -1));
        document.getElementById('down').addEventListener('click', () => movePlayer(0, 1));
        document.getElementById('left').addEventListener('click', () => movePlayer(-1, 0));
        document.getElementById('right').addEventListener('click', () => movePlayer(1, 0));
        document.getElementById('reset').addEventListener('click', resetLevel);
        document.getElementById('next-level').addEventListener('click', nextLevel);
        
        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>